{"ast":null,"code":"import { Router } from '@angular/router';\nimport { PresetsService } from '../presets.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../presets.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction CreateSamplerComponent_ul_18_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\")(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function CreateSamplerComponent_ul_18_li_1_Template_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const i_r5 = restoredCtx.index;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.removeFile(i_r5));\n    });\n    i0.ɵɵtext(4, \" \\u2715 \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const file_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(file_r4.name);\n  }\n}\nfunction CreateSamplerComponent_ul_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 15);\n    i0.ɵɵtemplate(1, CreateSamplerComponent_ul_18_li_1_Template, 5, 1, \"li\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.files);\n  }\n}\nfunction CreateSamplerComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtext(1, \"Cr\\u00E9ation du preset en cours\\u2026\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let CreateSamplerComponent = /*#__PURE__*/(() => {\n  class CreateSamplerComponent {\n    constructor(svc, router) {\n      this.svc = svc;\n      this.router = router;\n      this.loading = false;\n    }\n    createPreset() {\n      const input = prompt('Nom du nouveau preset vide :', 'Preset vide');\n      if (!input) {\n        return;\n      }\n      const name = input.trim();\n      if (!name) {\n        return;\n      }\n      this.loading = true;\n      this.svc.list().subscribe({\n        next: presets => {\n          const exists = (presets || []).some(p => (p.name || '').toLowerCase() === name.toLowerCase());\n          if (exists) {\n            alert('Un preset avec ce nom existe déjà.');\n            this.loading = false;\n            return;\n          }\n          const body = {\n            name,\n            type: 'Empty',\n            isFactoryPresets: false,\n            samples: []\n          };\n          this.svc.create(body).subscribe({\n            next: () => {\n              alert('Preset créé.');\n              this.loading = false;\n              this.router.navigate(['/']);\n            },\n            error: e => {\n              this.loading = false;\n              alert('Erreur lors de la création: ' + (e?.error?.error || e?.message || e));\n            }\n          });\n        },\n        error: err => {\n          console.error(err);\n          this.loading = false;\n          alert('Impossible de vérifier les presets existants.');\n        }\n      });\n    }\n    static {\n      this.ɵfac = function CreateSamplerComponent_Factory(t) {\n        return new (t || CreateSamplerComponent)(i0.ɵɵdirectiveInject(i1.PresetsService), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: CreateSamplerComponent,\n        selectors: [[\"app-create-sampler\"]],\n        decls: 25,\n        vars: 8,\n        consts: [[1, \"example-flex-container\"], [\"for\", \"preset-name\", 1, \"field-label\"], [\"id\", \"preset-name\", \"type\", \"text\", \"placeholder\", \"Mon super preset\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"preset-urls\", 1, \"field-label\"], [\"id\", \"preset-urls\", \"rows\", \"4\", \"placeholder\", \"Ex: ./MonPreset/kick.wav\", 3, \"ngModel\", \"ngModelChange\"], [1, \"drop-zone\", 3, \"drop\", \"dragover\", \"dragleave\"], [1, \"muted\"], [\"type\", \"button\", 1, \"action\", \"secondary\", 3, \"click\"], [\"type\", \"file\", \"multiple\", \"\", \"accept\", \"audio/*\", \"hidden\", \"\", 3, \"change\"], [\"fileInput\", \"\"], [\"class\", \"file-list\", 4, \"ngIf\"], [1, \"example-button-row\"], [1, \"action\", 3, \"disabled\", \"click\"], [\"routerLink\", \"/\", 1, \"action\", \"secondary\", 3, \"disabled\"], [\"class\", \"muted\", 4, \"ngIf\"], [1, \"file-list\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 1, \"chip-remove\", 3, \"click\"]],\n        template: function CreateSamplerComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r8 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n            i0.ɵɵtext(2, \"Cr\\u00E9er un nouveau preset\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"label\", 1);\n            i0.ɵɵtext(4, \"Nom du preset\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"input\", 2);\n            i0.ɵɵlistener(\"ngModelChange\", function CreateSamplerComponent_Template_input_ngModelChange_5_listener($event) {\n              return ctx.name = $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"label\", 3);\n            i0.ɵɵtext(7, \"URLs des sons (une par ligne, optionnel)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"textarea\", 4);\n            i0.ɵɵlistener(\"ngModelChange\", function CreateSamplerComponent_Template_textarea_ngModelChange_8_listener($event) {\n              return ctx.urlText = $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"div\", 5);\n            i0.ɵɵlistener(\"drop\", function CreateSamplerComponent_Template_div_drop_9_listener($event) {\n              return ctx.onDrop($event);\n            })(\"dragover\", function CreateSamplerComponent_Template_div_dragover_9_listener($event) {\n              return ctx.onDragOver($event);\n            })(\"dragleave\", function CreateSamplerComponent_Template_div_dragleave_9_listener($event) {\n              return ctx.onDragLeave($event);\n            });\n            i0.ɵɵelementStart(10, \"p\");\n            i0.ɵɵtext(11, \"Glissez-d\\u00E9posez des fichiers audio ici\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"p\", 6);\n            i0.ɵɵtext(13, \"ou\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"button\", 7);\n            i0.ɵɵlistener(\"click\", function CreateSamplerComponent_Template_button_click_14_listener() {\n              i0.ɵɵrestoreView(_r8);\n              const _r0 = i0.ɵɵreference(17);\n              return i0.ɵɵresetView(_r0.click());\n            });\n            i0.ɵɵtext(15, \" Parcourir le PC\\u2026 \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"input\", 8, 9);\n            i0.ɵɵlistener(\"change\", function CreateSamplerComponent_Template_input_change_16_listener($event) {\n              return ctx.onFileSelected($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(18, CreateSamplerComponent_ul_18_Template, 2, 1, \"ul\", 10);\n            i0.ɵɵelementStart(19, \"div\", 11)(20, \"button\", 12);\n            i0.ɵɵlistener(\"click\", function CreateSamplerComponent_Template_button_click_20_listener() {\n              return ctx.createPreset();\n            });\n            i0.ɵɵtext(21, \" Cr\\u00E9er le preset \");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"button\", 13);\n            i0.ɵɵtext(23, \" Retour \\u00E0 la liste \");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(24, CreateSamplerComponent_div_24_Template, 2, 0, \"div\", 14);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngModel\", ctx.name);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngModel\", ctx.urlText);\n            i0.ɵɵadvance(1);\n            i0.ɵɵclassProp(\"over\", ctx.isDragOver);\n            i0.ɵɵadvance(9);\n            i0.ɵɵproperty(\"ngIf\", ctx.files.length);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", ctx.loading);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", ctx.loading);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i2.RouterLink],\n        styles: [\".example-flex-container[_ngcontent-%COMP%]{margin-top:4px}\"]\n      });\n    }\n  }\n  return CreateSamplerComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}