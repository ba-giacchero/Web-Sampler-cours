{"ast":null,"code":"import { Router } from '@angular/router';\nimport { PresetsService } from '../presets.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../presets.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction CreateSamplerComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtext(1, \"Cr\\u00E9ation en cours\\u2026\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let CreateSamplerComponent = /*#__PURE__*/(() => {\n  class CreateSamplerComponent {\n    constructor(svc, router) {\n      this.svc = svc;\n      this.router = router;\n      this.loading = false;\n    }\n    createPreset() {\n      const input = prompt('Nom du nouveau preset vide :', 'Preset vide');\n      if (!input) {\n        return;\n      }\n      const name = input.trim();\n      if (!name) {\n        return;\n      }\n      this.loading = true;\n      this.svc.list().subscribe({\n        next: presets => {\n          const exists = (presets || []).some(p => (p.name || '').toLowerCase() === name.toLowerCase());\n          if (exists) {\n            alert('Un preset avec ce nom existe déjà.');\n            this.loading = false;\n            return;\n          }\n          const body = {\n            name,\n            type: 'Empty',\n            isFactoryPresets: false,\n            samples: []\n          };\n          this.svc.create(body).subscribe({\n            next: () => {\n              alert('Preset créé.');\n              this.loading = false;\n              this.router.navigate(['/']);\n            },\n            error: e => {\n              this.loading = false;\n              alert('Erreur lors de la création: ' + (e?.error?.error || e?.message || e));\n            }\n          });\n        },\n        error: err => {\n          console.error(err);\n          this.loading = false;\n          alert('Impossible de vérifier les presets existants.');\n        }\n      });\n    }\n    static {\n      this.ɵfac = function CreateSamplerComponent_Factory(t) {\n        return new (t || CreateSamplerComponent)(i0.ɵɵdirectiveInject(i1.PresetsService), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: CreateSamplerComponent,\n        selectors: [[\"app-create-sampler\"]],\n        decls: 9,\n        vars: 1,\n        consts: [[1, \"example-flex-container\"], [1, \"example-button-row\"], [1, \"action\", 3, \"click\"], [\"routerLink\", \"/\", 1, \"action\", \"secondary\"], [\"class\", \"muted\", 4, \"ngIf\"], [1, \"muted\"]],\n        template: function CreateSamplerComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"p\");\n            i0.ɵɵtext(2, \"Cr\\u00E9er un nouveau preset vide sur le serveur.\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"div\", 1)(4, \"button\", 2);\n            i0.ɵɵlistener(\"click\", function CreateSamplerComponent_Template_button_click_4_listener() {\n              return ctx.createPreset();\n            });\n            i0.ɵɵtext(5, \"Create Preset\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"button\", 3);\n            i0.ɵɵtext(7, \"Retour \\u00E0 la liste\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(8, CreateSamplerComponent_div_8_Template, 2, 0, \"div\", 4);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(8);\n            i0.ɵɵproperty(\"ngIf\", ctx.loading);\n          }\n        },\n        dependencies: [i3.NgIf, i2.RouterLink],\n        styles: [\".example-flex-container[_ngcontent-%COMP%]{margin-top:4px}\"]\n      });\n    }\n  }\n  return CreateSamplerComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}